server {
    listen 80;
    server_name _;  # catch-all server name (matches any host)

    # Root directory for static files
    root /var/www/html;
    index index.html index.htm;

    # Enable Passenger (app server) for this server block
    passenger_enabled on;
    passenger_user app;
    # Note: passenger_ruby, passenger_node, etc. are configured globally by the installed Passenger module

    # Serve static files directly and fallback to Passenger app if not found
    location / {
        try_files $uri $uri/ @passenger_app;
    }

    # Pass requests to Passenger (the app) if no static file matched
    location @passenger_app {
        passenger_enabled on;
        passenger_pass_header X-Forwarded-For;
        passenger_pass_header X-Forwarded-Proto;
        # Passenger will take over handling requests here (no further config needed if app is present)
    }

    # Increase upload size limit (just an example of a useful config tweak)
    client_max_body_size 50m;
}
